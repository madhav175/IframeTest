<!DOCTYPE html>
<html>
<head>
	<title>JSOM DCR Test</title>
	<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
	<script type="text/javascript">
	document.cookie = "username=John Doe";
	function makeRequestWithUserGesture() {
		var promise = document.hasStorageAccess();
		promise.then(
		  function (hasAccess) {
		    // Boolean hasAccess says whether the document has access or not.
			  text.value += 'Has Access';
		  },
		  function (reason) {
		    // Promise was rejected for some reason.
			  text.value += "failure" + reason;
		  }
		);
		  var promise = document.requestStorageAccess();
		  promise.then(
		    function () {
			text.value += 'Access granted';
			console.log("Access granted");
		      // Storage access was granted.
		    },
		    function () {
		      // Storage access was denied.
			console.log("Access Denied");
			text.value += 'Access denied';
		    }
		  );
		}
	</script>
</head>
<body>
  <div> Hello world
  </div>
  <textarea id="text" cols="20" rows="5"></textarea>
  <div>
			<button id="CookieAccess" onclick="makeRequestWithUserGesture()">CookieAccess</button>
		</div>
</body>
</html>
